var _interopRequireDefault=require("@babel/runtime-corejs3/helpers/interopRequireDefault"),_Object$defineProperty=require("@babel/runtime-corejs3/core-js-stable/object/define-property");_Object$defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.clearOption=exports.disableOption=void 0;var _setTimeout2=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/set-timeout")),_map=_interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/map")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/slicedToArray")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/createClass")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/getPrototypeOf")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/assertThisInitialized")),_inherits2=_interopRequireDefault(require("@babel/runtime-corejs3/helpers/inherits")),_react=_interopRequireDefault(require("react")),_store=require("src/store");require("./index.scss");var _actions=require("../../constants/actions"),mask=document.querySelector("#mask"),disableOption=function(){mask.style.display="block"};exports.disableOption=disableOption;var clearOption=function(){mask.style.display="none"};exports.clearOption=clearOption;var Page=function(_React$Component){function Page(){var _this;return(0,_classCallCheck2.default)(this,Page),(_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Page).call(this))).getChildrens=function(props){var _context;disableOption();var children=props.children,pageSlideClass=((0,_store.getStoreState)()||{}).global.pageSlideClass,preChildren=(0,_assertThisInitialized2.default)(_this).preChildren,_React$Children$map=(0,_map.default)(_context=_react.default.Children).call(_context,children,function(item){return item}),nextChildren=(0,_slicedToArray2.default)(_React$Children$map,1)[0],childrens=[nextChildren];preChildren&&nextChildren.key!==preChildren.key&&"page-none"!==pageSlideClass?(_this.nextChildren=props,"page-left"===pageSlideClass?childrens=[preChildren=_react.default.cloneElement(preChildren,{className:"page-left-pre"}),nextChildren=_react.default.cloneElement(nextChildren,{className:"page-left-next"})]:"page-right"===pageSlideClass&&(preChildren=_react.default.cloneElement(preChildren,{className:"page-right-pre"}),childrens=[nextChildren=_react.default.cloneElement(nextChildren,{className:"page-right-next"}),preChildren])):(_this.nextChildren=null,clearOption()),_this.preChildren=nextChildren,_this.setState({childrens:_react.default.createElement("div",{className:"page-action-box"},childrens)})},_this.preChildren=null,_this.nextChildren=null,_this}return(0,_inherits2.default)(Page,_React$Component),(0,_createClass2.default)(Page,[{key:"componentWillMount",value:function(){this.getChildrens(this.props)}},{key:"componentWillReceiveProps",value:function(nextProps){this.getChildrens(nextProps)}},{key:"componentDidUpdate",value:function(){var _this2=this;this.nextChildren&&((0,_setTimeout2.default)(function(){document.querySelector(".page-action-box").classList.add("action")},50),(0,_setTimeout2.default)(function(){clearOption(),document.querySelector(".page-action-box").classList.remove("action"),_this2.getChildrens(_this2.nextChildren),(0,_store.getStoreDispatch)({type:_actions.SET_GLOBAL_PAGE_SLIDE_CLASS,data:0})},300))}},{key:"render",value:function(){return this.state.childrens}}]),Page}(_react.default.Component);Page.state={childrens:null};var _default=Page;exports.default=_default;